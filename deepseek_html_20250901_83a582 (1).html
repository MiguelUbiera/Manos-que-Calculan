<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instituto para Sordos Santa Rosa, Inc. - Actividades Matem√°ticas</title>
    <style>
        :root {
            --primary: #3f51b5;
            --secondary: #f50057;
            --accent: #00bcd4;
            --light: #f5f5f5;
            --dark: #212121;
            --success: #4caf50;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f9f9f9;
            color: var(--dark);
            line-height: 1.6;
            position: relative;
            overflow-x: hidden;
            min-height: 100vh;
        }
        
        /* Manos de fondo con animaci√≥n */
        .floating-hand {
            position: fixed;
            font-size: 2rem;
            opacity: 0.15;
            z-index: -1;
            pointer-events: none;
            animation: floatHand 15s infinite ease-in-out;
        }
        
        @keyframes floatHand {
            0%, 100% {
                transform: translate(0, 0) rotate(0deg);
                opacity: 0.1;
            }
            25% {
                transform: translate(30px, -20px) rotate(5deg);
                opacity: 0.2;
            }
            50% {
                transform: translate(-20px, 15px) rotate(-5deg);
                opacity: 0.15;
            }
            75% {
                transform: translate(15px, 25px) rotate(3deg);
                opacity: 0.2;
            }
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: white;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            max-width: 1200px;
        }
        
        .child-figure {
            font-size: 3rem;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .logo-icon {
            font-size: 2.5rem;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 0.5rem;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .container {
            display: flex;
            max-width: 1200px;
            margin: 2rem auto;
            gap: 2rem;
            padding: 0 1rem;
            position: relative;
            z-index: 1;
        }
        
        .sidebar {
            flex: 0 0 250px;
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            height: fit-content;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .sidebar:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }
        
        .categories h2 {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            color: var(--primary);
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--light);
        }
        
        .category-list {
            list-style: none;
        }
        
        .category-item {
            margin-bottom: 0.5rem;
            opacity: 0;
            transform: translateX(-20px);
            animation: fadeInRight 0.6s ease forwards;
        }
        
        .category-item:nth-child(1) { animation-delay: 0.1s; }
        .category-item:nth-child(2) { animation-delay: 0.2s; }
        .category-item:nth-child(3) { animation-delay: 0.3s; }
        .category-item:nth-child(4) { animation-delay: 0.4s; }
        .category-item:nth-child(5) { animation-delay: 0.5s; }
        .category-item:nth-child(6) { animation-delay: 0.6s; }
        .category-item:nth-child(7) { animation-delay: 0.7s; }
        .category-item:nth-child(8) { animation-delay: 0.8s; }
        
        @keyframes fadeInRight {
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .category-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            width: 100%;
            padding: 0.8rem 1rem;
            background: var(--light);
            border: none;
            border-radius: 6px;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }
        
        .category-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        .category-btn:hover::before {
            left: 100%;
        }
        
        .category-btn:hover {
            background: #e0e0e0;
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .category-btn.active {
            background: var(--primary);
            color: white;
        }
        
        .main-content {
            flex: 1;
        }
        
        .search-box {
            display: flex;
            margin-bottom: 1.5rem;
            background: white;
            border-radius: 50px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: box-shadow 0.3s ease;
        }
        
        .search-box:focus-within {
            box-shadow: 0 0 0 3px rgba(63, 81, 181, 0.1);
        }
        
        .search-box input {
            flex: 1;
            padding: 0.8rem 1.5rem;
            border: none;
            outline: none;
            font-size: 1rem;
            background: transparent;
        }
        
        .search-box button {
            padding: 0.8rem 1.5rem;
            background: var(--primary);
            color: white;
            border: none;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        
        .search-box button:hover {
            background: #303f9f;
        }
        
        .activities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
        }
        
        .activity-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease, opacity 0.3s ease;
            transform: translateY(20px);
            opacity: 0;
            animation: fadeInUp 0.6s ease forwards;
            perspective: 1000px;
            cursor: pointer;
        }
        
        .activity-card:nth-child(1) { animation-delay: 0.1s; }
        .activity-card:nth-child(2) { animation-delay: 0.2s; }
        .activity-card:nth-child(3) { animation-delay: 0.3s; }
        .activity-card:nth-child(4) { animation-delay: 0.4s; }
        .activity-card:nth-child(5) { animation-delay: 0.5s; }
        .activity-card:nth-child(6) { animation-delay: 0.6s; }
        .activity-card:nth-child(7) { animation-delay: 0.7s; }
        
        @keyframes fadeInUp {
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .card-inner {
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        
        .activity-card:hover .card-inner {
            transform: rotateY(5deg) rotateX(5deg);
        }
        
        .activity-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }
        
        .card-header {
            padding: 1.2rem;
            background: var(--primary);
            color: white;
            position: relative;
        }
        
        .new-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--secondary);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            animation: pulse 2s infinite;
        }
        
        .card-body {
            padding: 1.2rem;
        }
        
        .progress-bar {
            height: 4px;
            background: #e0e0e0;
            border-radius: 2px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .progress-bar-fill {
            height: 100%;
            background: var(--accent);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 2px;
        }
        
        .card-footer {
            padding: 1rem 1.2rem;
            background: var(--light);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .open-btn {
            padding: 0.4rem 0.8rem;
            background: var(--secondary);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            font-size: 0.8rem;
        }
        
        .open-btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%);
            transform-origin: 50% 50%;
        }
        
        .open-btn:hover::after {
            animation: ripple 1s ease-out;
        }
        
        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 1;
            }
            20% {
                transform: scale(25, 25);
                opacity: 1;
            }
            100% {
                transform: scale(50, 50);
                opacity: 0;
            }
        }
        
        .open-btn:hover {
            background: #c51162;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .open-btn:active {
            transform: scale(0.95);
        }
        
        footer {
            text-align: center;
            padding: 2rem;
            margin-top: 2rem;
            background: var(--dark);
            color: white;
            position: relative;
            z-index: 1;
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 2rem auto;
            display: none;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            
            .sidebar {
                flex: 1;
                width: 100%;
            }
            
            .activities-grid {
                grid-template-columns: 1fr;
            }
            
            .floating-hand {
                display: none;
            }
            
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }
            
            .child-figure {
                font-size: 2.5rem;
            }
        }

        /* Estilos para actividades abiertas */
        .activity-screen {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            z-index: 1000;
            overflow: auto;
        }
        
        .activity-header {
            background: var(--primary);
            color: white;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .back-button {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* Estilos para juegos matem√°ticos */
        .game-container {
            background-color: #f5f5f5;
            display: flex;
            flex-direction: column;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            align-items: center;
            height: 100%;
            overflow: auto;
        }
        
        .game-header {
            background-color: white;
            color: black;
            text-align: center;
            padding: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            width: 100%;
        }
        
        .game-header h1 {
            margin: 0;
            font-size: 36px;
            color: var(--primary);
        }
        
        .game-header p {
            margin: 5px 0 0;
            font-size: 24px;
            color: var(--dark);
        }
        
        .game-inicio {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            width: 100%;
        }
        
        .game-nombre-input {
            font-size: 24px;
            padding: 10px;
            width: 300px;
            margin: 20px;
            border: 2px solid var(--primary);
            border-radius: 5px;
        }
        
        .game-comenzar-btn {
            padding: 10px 20px;
            font-size: 18px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .game-comenzar-btn:hover {
            background-color: #303f9f;
        }
        
        .game-contenedor {
            display: none;
            flex-direction: row;
            align-items: flex-start;
            padding: 20px;
            width: 100%;
            box-sizing: border-box;
            height: 100%;
            overflow: auto;
        }
        
        .game-juego {
            background-color: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            text-align: center;
            width: 60%;
            margin-right: 20px;
            position: relative;
        }
        
        .game-historial {
            background-color: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            text-align: center;
            width: 30%;
        }
        
        .game-problema {
            font-size: 72px;
            margin: 20px;
            color: var(--dark);
        }
        
        .game-temporizador {
            font-size: 32px;
            color: var(--secondary);
            margin: 10px;
            animation: blink 1s step-start infinite;
        }
        
        @keyframes blink {
            50% { opacity: 0.5; }
        }
        
        .game-respuesta-input {
            font-size: 24px;
            width: 100px;
            text-align: center;
            margin: 10px;
            padding: 5px;
            border: 2px solid var(--primary);
            border-radius: 5px;
        }
        
        .game-mensaje {
            min-height: 100px;
            margin: 10px;
            font-weight: bold;
            font-size: 24px;
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .game-burbuja {
            background-color: var(--success);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            margin: 5px 0;
            animation: flotar 3s ease-in-out forwards;
            position: relative;
            font-size: 28px;
        }
        
        @keyframes flotar {
            0% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-50px); }
        }
        
        .game-resultado-final {
            font-size: 28px;
            padding: 20px;
            margin: 20px;
            border-radius: 10px;
            background-color: white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        
        .game-reiniciar-btn {
            padding: 10px 20px;
            font-size: 18px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: none;
            transition: background-color 0.3s;
        }
        
        .game-reiniciar-btn:hover {
            background-color: #303f9f;
        }
        
        .game-terminar-btn {
            padding: 10px 20px;
            font-size: 18px;
            background-color: var(--secondary);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .game-terminar-btn:hover {
            background-color: #c51162;
        }
        
        .game-barrer-btn {
            padding: 10px 20px;
            font-size: 18px;
            background-color: var(--accent);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
            transition: background-color 0.3s;
        }
        
        .game-barrer-btn:hover {
            background-color: #0097a7;
        }
        
        .game-reconocimiento {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            text-align: center;
            max-width: 600px;
            margin: 20px auto;
        }
        
        .game-reconocimiento h1 {
            font-size: 1.5rem;
            color: var(--dark);
            margin: 0;
        }
        
        .game-reconocimiento h2 {
            font-size: 1rem;
            color: var(--dark);
            margin: 5px 0;
        }
        
        .game-reconocimiento p {
            font-size: 1.2rem;
            color: var(--dark);
            margin: 5px 0;
        }
        
        .game-ocultar {
            display: none;
        }
        
        .game-historial h2 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: var(--dark);
        }
        
        .game-historial table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        
        .game-historial th, .game-historial td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        
        .game-historial th {
            background-color: #f4f4f4;
        }
        
        .game-elite {
            background-color: #d4edda;
            color: #155724;
        }
        
        .game-experto {
            background-color: #cce5ff;
            color: #004085;
        }
        
        .game-entrenado {
            background-color: #e6e6fa;
            color: #6c757d;
        }
        
        .game-iniciado {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        .game-operacion-actual {
            font-size: 20px;
            margin: 10px 0;
            font-weight: bold;
            color: var(--primary);
        }
        
        .game-secuencia {
            font-size: 18px;
            margin: 10px 0;
            color: var(--dark);
        }
        
        .game-puzzle-container {
            position: absolute;
            bottom: 20px;
            left: 20px;
            display: flex;
            flex-wrap: wrap;
            width: 200px;
        }
        
        .game-puzzle-piece {
            width: 20px;
            height: 20px;
            background-color: var(--success);
            margin: 2px;
            border-radius: 5px;
            opacity: 0;
            animation: appear 0.5s ease forwards;
        }
        
        @keyframes appear {
            0% { opacity: 0; transform: scale(0); }
            100% { opacity: 1; transform: scale(1); }
        }

        /* Estilos espec√≠ficos para cada juego */
        .multiplicacion-game { background-color: #8A2BE2; }
        .suma-game { background-color: #1E90FF; }
        .resta-game { background-color: #1E90FF; }
        .calculadora-game { background-color: #FF6347; }
    </style>
</head>
<body>
    <!-- Manos de fondo -->
    <div class="floating-hand" style="top: 10%; left: 5%; animation-delay: 0s;">üëê</div>
    <div class="floating-hand" style="top: 20%; right: 10%; animation-delay: 2s;">üëê</div>
    <div class="floating-hand" style="top: 40%; left: 15%; animation-delay: 4s;">üëê</div>
    <div class="floating-hand" style="top: 60%; right: 5%; animation-delay: 6s;">üëê</div>
    <div class="floating-hand" style="top: 80%; left: 8%; animation-delay: 8s;">üëê</div>
    <div class="floating-hand" style="top: 30%; right: 20%; animation-delay: 10s;">üëê</div>
    <div class="floating-hand" style="top: 70%; left: 25%; animation-delay: 12s;">üëê</div>
    
    <header>
        <div class="header-content">
            <div class="child-figure">
                <div>üë¶</div>
                <!-- Se elimin√≥ la palabra "Estudiante" -->
            </div>
            
            <div class="logo">
                <span class="logo-icon">üëê</span>
                <h1>Manos que Calculan</h1>
                <span class="logo-icon">üëê</span>
            </div>
            
            <div class="child-figure">
                <div>üëß</div>
                <!-- Se elimin√≥ la palabra "Estudiante" -->
            </div>
        </div>
        <p class="subtitle">Explora un ambiente inclusivo y disfruta de diversas actividades matem√°ticas clasificadas por temas, niveles educativos y categor√≠as.</p>
    </header>
    
    <div class="container">
        <aside class="sidebar">
            <div class="categories">
                <h2>Categor√≠as</h2>
                <ul class="category-list">
                    <li class="category-item">
                        <button class="category-btn active" data-category="all">
                            <span>üìö</span> Todas las actividades
                        </button>
                    </li>
                    <li class="category-item">
                        <button class="category-btn" data-category="juegos">
                            <span>üéØ</span> Juegos Matem√°ticos
                        </button>
                    </li>
                    <li class="category-item">
                        <button class="category-btn" data-category="herramientas">
                            <span>üõ†Ô∏è</span> Herramientas
                        </button>
                    </li>
                </ul>
            </div>
        </aside>
        
        <main class="main-content">
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="Buscar actividades...">
                <button id="searchButton">üîç Buscar</button>
            </div>
            
            <div class="activities-grid">
                <!-- Juego de Multiplicaci√≥n -->
                <div class="activity-card" data-category="juegos" data-content="multiplicacion">
                    <div class="card-inner">
                        <div class="card-header">
                            <h3>Desaf√≠os de Multiplicaci√≥n</h3>
                            <span class="new-badge">Nuevo</span>
                        </div>
                        <div class="card-body">
                            <p>Practica las tablas de multiplicar del 2 al 6 con este divertido juego.</p>
                            <p class="level">Nivel: Primaria</p>
                            <div class="progress-bar">
                                <div class="progress-bar-fill" style="width: 85%"></div>
                            </div>
                        </div>
                        <div class="card-footer">
                            <span>‚è±Ô∏è 15 min</span>
                            <button class="open-btn">Abrir</button>
                        </div>
                    </div>
                </div>
                
                <!-- Juego de Suma -->
                <div class="activity-card" data-category="juegos" data-content="suma">
                    <div class="card-inner">
                        <div class="card-header">
                            <h3>Desaf√≠os de Suma</h3>
                            <span class="new-badge">Nuevo</span>
                        </div>
                        <div class="card-body">
                            <p>Suma n√∫meros r√°pidamente con este juego de velocidad.</p>
                            <p class="level">Nivel: Todos</p>
                            <div class="progress-bar">
                                <div class="progress-bar-fill" style="width: 75%"></div>
                            </div>
                        </div>
                        <div class="card-footer">
                            <span>‚è±Ô∏è 10 min</span>
                            <button class="open-btn">Abrir</button>
                        </div>
                    </div>
                </div>
                
                <!-- Juego de Resta -->
                <div class="activity-card" data-category="juegos" data-content="resta">
                    <div class="card-inner">
                        <div class="card-header">
                            <h3>Desaf√≠os de Resta</h3>
                            <span class="new-badge">Nuevo</span>
                        </div>
                        <div class="card-body">
                            <p>Practica restas con este juego de velocidad y precisi√≥n.</p>
                            <p class="level">Nivel: Todos</p>
                            <div class="progress-bar">
                                <div class="progress-bar-fill" style="width: 70%"></div>
                            </div>
                        </div>
                        <div class="card-footer">
                            <span>‚è±Ô∏è 10 min</span>
                            <button class="open-btn">Abrir</button>
                        </div>
                    </div>
                </div>
                
                <!-- Calculadora Humana -->
                <div class="activity-card" data-category="juegos" data-content="calculadora">
                    <div class="card-inner">
                        <div class="card-header">
                            <h3>Calculadora Humana</h3>
                            <span class="new-badge">Nuevo</span>
                        </div>
                        <div class="card-body">
                            <p>Desaf√≠o de operaciones matem√°ticas consecutivas. ¬°Construye tu secuencia!</p>
                            <p class="level">Nivel: Todos</p>
                            <div class="progress-bar">
                                <div class="progress-bar-fill" style="width: 90%"></div>
                            </div>
                        </div>
                        <div class="card-footer">
                            <span>‚è±Ô∏è 20 min</span>
                            <button class="open-btn">Abrir</button>
                        </div>
                    </div>
                </div>
                
                <!-- Sorteo (en Herramientas) -->
                <div class="activity-card" data-category="herramientas" data-content="sorteo">
                    <div class="card-inner">
                        <div class="card-header">
                            <h3>Sorteo de Estudiantes</h3>
                        </div>
                        <div class="card-body">
                            <p>Herramienta para realizar sorteos aleatorios de estudiantes.</p>
                            <p class="level">Nivel: Todos</p>
                            <div class="progress-bar">
                                <div class="progress-bar-fill" style="width: 100%"></div>
                            </div>
                        </div>
                        <div class="card-footer">
                            <span>‚è±Ô∏è 5 min</span>
                            <button class="open-btn">Abrir</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="loading-spinner" id="loadingSpinner"></div>
        </main>
    </div>
    
    <!-- Pantallas de actividades -->
    <!-- Multiplicaci√≥n -->
    <div id="multiplicacionScreen" class="activity-screen">
        <div class="activity-header">
            <button class="back-button" onclick="closeActivity()">‚Üê</button>
            <h2>Desaf√≠os de Multiplicaci√≥n</h2>
            <div></div>
        </div>
        <div class="game-container multiplicacion-game">
            <div class="game-header">
                <h1>Instituto para Sordos Santa Rosa</h1>
                <p>Desaf√≠os de Multiplicaci√≥n - Profesor Miguel Ubiera</p>
            </div>

            <div class="game-inicio" id="multiplicacionInicio">
                <input type="text" class="game-nombre-input" id="multiplicacionNombreInput" placeholder="Escribe tu nombre" autofocus>
                <button class="game-comenzar-btn" id="multiplicacionComenzarBtn">Comenzar</button>
            </div>

            <div class="game-contenedor" id="multiplicacionContenedor">
                <div class="game-juego">
                    <div id="multiplicacionEstadisticas">
                        <div>Pregunta: <span id="multiplicacionPreguntaActual">0</span>/15</div>
                        <div>Puntuaci√≥n: <span id="multiplicacionPuntuacionActual">0</span>%</div>
                    </div>
                    <div class="game-operacion-actual">Tabla del <span id="multiplicacionTablaNumero">0</span></div>
                    <div class="game-temporizador" id="multiplicacionTemporizador">Tiempo: 8</div>
                    <div class="game-problema" id="multiplicacionProblema"></div>
                    <input type="number" class="game-respuesta-input" id="multiplicacionRespuesta" autofocus>
                    <div class="game-mensaje" id="multiplicacionMensaje"></div>
                    <div class="game-resultado-final" id="multiplicacionResultadoFinal"></div>
                    <button class="game-terminar-btn" id="multiplicacionTerminarBtn">Terminar Partida</button>
                    <button class="game-reiniciar-btn" id="multiplicacionReiniciarBtn">Reiniciar Partida</button>
                </div>
                <div class="game-historial">
                    <h2>Historial de Desempe√±o</h2>
                    <table>
                        <thead>
                            <tr>
                                <th>Nombre</th>
                                <th>Puntuaci√≥n</th>
                            </tr>
                        </thead>
                        <tbody id="multiplicacionListaHistorial"></tbody>
                    </table>
                    <button class="game-barrer-btn" id="multiplicacionBarrerBtn">Barrer</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Suma -->
    <div id="sumaScreen" class="activity-screen">
        <div class="activity-header">
            <button class="back-button" onclick="closeActivity()">‚Üê</button>
            <h2>Desaf√≠os de Suma</h2>
            <div></div>
        </div>
        <div class="game-container suma-game">
            <div class="game-header">
                <h1>Instituto para Sordos Santa Rosa</h1>
                <p>Desaf√≠os de Suma - Profesor Miguel Ubiera</p>
            </div>

            <div class="game-inicio" id="sumaInicio">
                <input type="text" class="game-nombre-input" id="sumaNombreInput" placeholder="Escribe tu nombre" autofocus>
                <button class="game-comenzar-btn" id="sumaComenzarBtn">Comenzar</button>
            </div>

            <div class="game-contenedor" id="sumaContenedor">
                <div class="game-juego">
                    <div id="sumaEstadisticas">
                        <div>Pregunta: <span id="sumaPreguntaActual">0</span>/15</div>
                        <div>Puntuaci√≥n: <span id="sumaPuntuacionActual">0</span>%</div>
                    </div>
                    <div class="game-temporizador" id="sumaTemporizador">Tiempo: 8</div>
                    <div class="game-problema" id="sumaProblema"></div>
                    <input type="number" class="game-respuesta-input" id="sumaRespuesta" autofocus>
                    <div class="game-mensaje" id="sumaMensaje"></div>
                    <div class="game-resultado-final" id="sumaResultadoFinal"></div>
                    <button class="game-terminar-btn" id="sumaTerminarBtn">Terminar Partida</button>
                    <button class="game-reiniciar-btn" id="sumaReiniciarBtn">Reiniciar Partida</button>
                </div>
                <div class="game-historial">
                    <h2>Historial de Desempe√±o</h2>
                    <table>
                        <thead>
                            <tr>
                                <th>Nombre</th>
                                <th>Puntuaci√≥n</th>
                            </tr>
                        </thead>
                        <tbody id="sumaListaHistorial"></tbody>
                    </table>
                    <button class="game-barrer-btn" id="sumaBarrerBtn">Barrer</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Resta -->
    <div id="restaScreen" class="activity-screen">
        <div class="activity-header">
            <button class="back-button" onclick="closeActivity()">‚Üê</button>
            <h2>Desaf√≠os de Resta</h2>
            <div></div>
        </div>
        <div class="game-container resta-game">
            <div class="game-header">
                <h1>Instituto para Sordos Santa Rosa</h1>
                <p>Desaf√≠os de Resta - Profesor Miguel Ubiera</p>
            </div>

            <div class="game-inicio" id="restaInicio">
                <input type="text" class="game-nombre-input" id="restaNombreInput" placeholder="Escribe tu nombre" autofocus>
                <button class="game-comenzar-btn" id="restaComenzarBtn">Comenzar</button>
            </div>

            <div class="game-contenedor" id="restaContenedor">
                <div class="game-juego">
                    <div id="restaEstadisticas">
                        <div>Pregunta: <span id="restaPreguntaActual">0</span>/15</div>
                        <div>Puntuaci√≥n: <span id="restaPuntuacionActual">0</span>%</div>
                    </div>
                    <div class="game-temporizador" id="restaTemporizador">Tiempo: 8</div>
                    <div class="game-problema" id="restaProblema"></div>
                    <input type="number" class="game-respuesta-input" id="restaRespuesta" autofocus>
                    <div class="game-mensaje" id="restaMensaje"></div>
                    <div class="game-resultado-final" id="restaResultadoFinal"></div>
                    <button class="game-terminar-btn" id="restaTerminarBtn">Terminar Partida</button>
                    <button class="game-reiniciar-btn" id="restaReiniciarBtn">Reiniciar Partida</button>
                </div>
                <div class="game-historial">
                    <h2>Historial de Desempe√±o</h2>
                    <table>
                        <thead>
                            <tr>
                                <th>Nombre</th>
                                <th>Puntuaci√≥n</th>
                            </tr>
                        </thead>
                        <tbody id="restaListaHistorial"></tbody>
                    </table>
                    <button class="game-barrer-btn" id="restaBarrerBtn">Barrer</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Calculadora Humana -->
    <div id="calculadoraScreen" class="activity-screen">
        <div class="activity-header">
            <button class="back-button" onclick="closeActivity()">‚Üê</button>
            <h2>Calculadora Humana</h2>
            <div></div>
        </div>
        <div class="game-container calculadora-game">
            <div class="game-header">
                <h1>Instituto para Sordos Santa Rosa</h1>
                <p>Calculadora Humana - Profesor Miguel Ubiera</p>
            </div>

            <div class="game-inicio" id="calculadoraInicio">
                <input type="text" class="game-nombre-input" id="calculadoraNombreInput" placeholder="Escribe tu nombre" autofocus>
                <button class="game-comenzar-btn" id="calculadoraComenzarBtn">Comenzar</button>
            </div>

            <div class="game-contenedor" id="calculadoraContenedor">
                <div class="game-juego">
                    <div id="calculadoraEstadisticas">
                        <div>Paso: <span id="calculadoraPasoActual">0</span>/‚àû</div>
                        <div>Puntuaci√≥n: <span id="calculadoraPuntuacionActual">0</span></div>
                    </div>
                    <div class="game-operacion-actual">Operaci√≥n: <span id="calculadoraTipoOperacion"></span></div>
                    <div class="game-temporizador" id="calculadoraTemporizador">Tiempo: 120</div>
                    <div class="game-secuencia">Secuencia: <span id="calculadoraSecuenciaValor">0</span></div>
                    <div class="game-problema" id="calculadoraProblema"></div>
                    <input type="number" class="game-respuesta-input" id="calculadoraRespuesta" min="0" step="1" autofocus>
                    <div class="game-mensaje" id="calculadoraMensaje"></div>
                    <div class="game-resultado-final" id="calculadoraResultadoFinal"></div>
                    <button class="game-terminar-btn" id="calculadoraTerminarBtn">Terminar Partida</button>
                    <button class="game-reiniciar-btn" id="calculadoraReiniciarBtn">Reiniciar Partida</button>
                    <div class="game-puzzle-container" id="calculadoraPuzzleContainer"></div>
                </div>
                <div class="game-historial">
                    <h2>Historial de Desempe√±o</h2>
                    <table>
                        <thead>
                            <tr>
                                <th>Nombre</th>
                                <th>Puntuaci√≥n</th>
                                <th>Jerarqu√≠a</th>
                            </tr>
                        </thead>
                        <tbody id="calculadoraListaHistorial"></tbody>
                    </table>
                    <button class="game-barrer-btn" id="calculadoraBarrerBtn">Barrer</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Sorteo -->
    <div id="sorteoScreen" class="activity-screen">
        <div class="activity-header">
            <button class="back-button" onclick="closeActivity()">‚Üê</button>
            <h2>Sorteo de Estudiantes</h2>
            <div></div>
        </div>
        <div style="padding: 20px; text-align: center;">
            <h2>Sorteo de Estudiantes</h2>
            <p>Herramienta para realizar sorteos aleatorios de estudiantes.</p>
            
            <div style="margin: 20px 0;">
                <textarea id="estudiantesInput" rows="10" cols="50" placeholder="Escribe los nombres de los estudiantes, uno por l√≠nea"></textarea>
            </div>
            
            <div style="margin: 20px 0;">
                <button id="realizarSorteoBtn" style="padding: 10px 20px; background: var(--primary); color: white; border: none; border-radius: 5px; cursor: pointer;">
                    Realizar Sorteo
                </button>
            </div>
            
            <div id="resultadoSorteo" style="font-size: 24px; margin: 20px 0; padding: 20px; background: var(--light); border-radius: 10px; display: none;">
                <h3>Ganador del Sorteo:</h3>
                <p id="ganadorSorteo"></p>
            </div>
        </div>
    </div>
    
    <footer>
        <p>Instituto para Sordos Santa Rosa, Inc.</p>
        <p>¬© 2025 - Desarrollado por Miguel Ubiera</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Variables globales
            const categoryButtons = document.querySelectorAll('.category-btn');
            const activityCards = document.querySelectorAll('.activity-card');
            const searchInput = document.getElementById('searchInput');
            const searchButton = document.getElementById('searchButton');
            const loadingSpinner = document.getElementById('loadingSpinner');
            
            // Crear m√°s manos flotantes de fondo
            function createFloatingHands() {
                const handsContainer = document.body;
                const handEmojis = ['üëê', 'üëç', 'üëÜ', '‚úã', 'ü§≤', 'üôå'];
                
                for (let i = 0; i < 12; i++) {
                    const hand = document.createElement('div');
                    hand.className = 'floating-hand';
                    hand.textContent = handEmojis[Math.floor(Math.random() * handEmojis.length)];
                    
                    // Posici√≥n aleatoria
                    const top = Math.random() * 100;
                    const left = Math.random() * 100;
                    const delay = Math.random() * 15;
                    
                    hand.style.top = `${top}%`;
                    hand.style.left = `${left}%`;
                    hand.style.animationDelay = `${delay}s`;
                    
                    handsContainer.appendChild(hand);
                }
            }
            
            createFloatingHands();
            
            // Observador de intersecci√≥n para animaciones
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate-in');
                    }
                });
            }, observerOptions);
            
            // Observar todos los elementos que queremos animar
            document.querySelectorAll('.activity-card, .category-item').forEach(item => {
                observer.observe(item);
            });
            
            // Abrir actividad al hacer clic en la tarjeta
            document.querySelectorAll('.activity-card').forEach(card => {
                card.addEventListener('click', function(e) {
                    // Evitar que se active cuando se hace clic en el bot√≥n
                    if (e.target.tagName === 'BUTTON') return;
                    
                    const activityContentId = this.getAttribute('data-content');
                    
                    if (activityContentId) {
                        openActivity(activityContentId);
                    }
                });
            });
            
            // Abrir actividad al hacer clic en el bot√≥n
            document.querySelectorAll('.open-btn').forEach(button => {
                button.addEventListener('click', function(e) {
                    e.stopPropagation(); // Evitar que se active el evento de la tarjeta
                    
                    const card = this.closest('.activity-card');
                    const activityContentId = card.getAttribute('data-content');
                    
                    if (activityContentId) {
                        openActivity(activityContentId);
                    }
                });
            });
            
            function openActivity(activityId) {
                // Ocultar contenido principal
                document.querySelector('.container').style.display = 'none';
                document.querySelector('footer').style.display = 'none';
                
                // Mostrar la actividad correspondiente
                document.getElementById(activityId + 'Screen').style.display = 'block';
                
                // Inicializar el juego si es necesario
                if (activityId === 'multiplicacion') {
                    initMultiplicacionGame();
                } else if (activityId === 'suma') {
                    initSumaGame();
                } else if (activityId === 'resta') {
                    initRestaGame();
                } else if (activityId === 'calculadora') {
                    initCalculadoraGame();
                } else if (activityId === 'sorteo') {
                    initSorteo();
                }
            }
            
            window.closeActivity = function() {
                // Ocultar todas las actividades
                document.querySelectorAll('.activity-screen').forEach(screen => {
                    screen.style.display = 'none';
                });
                
                // Mostrar contenido principal
                document.querySelector('.container').style.display = 'flex';
                document.querySelector('footer').style.display = 'block';
            };
            
            // Funci√≥n para inicializar el juego de multiplicaci√≥n
            function initMultiplicacionGame() {
                let tiempoRestante, temporizador;
                let puntuacion = 0;
                let preguntaActual = 0;
                let totalPreguntas = 15;
                let nombreParticipante = "";
                let tablaActual = Math.floor(Math.random() * 5) + 2; // Tablas del 2 al 6
                let respuestaCorrecta = null;
                let historial = JSON.parse(localStorage.getItem('historialMultiplicacion')) || [];
                
                const nombreInput = document.getElementById('multiplicacionNombreInput');
                const comenzarBtn = document.getElementById('multiplicacionComenzarBtn');
                const contenedor = document.getElementById('multiplicacionContenedor');
                const inicio = document.getElementById('multiplicacionInicio');
                const preguntaActualElement = document.getElementById('multiplicacionPreguntaActual');
                const puntuacionActual = document.getElementById('multiplicacionPuntuacionActual');
                const tablaNumero = document.getElementById('multiplicacionTablaNumero');
                const temporizadorElement = document.getElementById('multiplicacionTemporizador');
                const problema = document.getElementById('multiplicacionProblema');
                const respuesta = document.getElementById('multiplicacionRespuesta');
                const mensaje = document.getElementById('multiplicacionMensaje');
                const resultadoFinal = document.getElementById('multiplicacionResultadoFinal');
                const terminarBtn = document.getElementById('multiplicacionTerminarBtn');
                const reiniciarBtn = document.getElementById('multiplicacionReiniciarBtn');
                const listaHistorial = document.getElementById('multiplicacionListaHistorial');
                const barrerBtn = document.getElementById('multiplicacionBarrerBtn');
                
                function iniciarJuego() {
                    nombreParticipante = nombreInput.value.trim();
                    if (nombreParticipante === "") {
                        alert("Por favor, escribe tu nombre.");
                        return;
                    }

                    inicio.style.display = 'none';
                    contenedor.style.display = 'flex';

                    puntuacion = 0;
                    preguntaActual = 0;
                    tablaActual = Math.floor(Math.random() * 5) + 2;
                    tablaNumero.textContent = tablaActual;
                    actualizarPuntuacion();
                    reiniciarBtn.style.display = 'none';
                    resultadoFinal.textContent = '';
                    mensaje.textContent = '';

                    generarProblema();
                }
                
                function generarProblema() {
                    if (preguntaActual >= totalPreguntas) {
                        terminarPartida();
                        return;
                    }
                    
                    preguntaActual++;
                    preguntaActualElement.textContent = preguntaActual;
                    
                    const num2 = Math.floor(Math.random() * 12) + 1;
                    respuestaCorrecta = tablaActual * num2;
                    problema.textContent = `${tablaActual} √ó ${num2} = ?`;
                    
                    tiempoRestante = 8;
                    temporizadorElement.textContent = `Tiempo: ${tiempoRestante}`;
                    
                    clearInterval(temporizador);
                    temporizador = setInterval(() => {
                        tiempoRestante--;
                        temporizadorElement.textContent = `Tiempo: ${tiempoRestante}`;

                        if (tiempoRestante <= 0) {
                            clearInterval(temporizador);
                            mensaje.textContent = "¬°Tiempo agotado!";
                            setTimeout(() => {
                                generarProblema();
                            }, 1500);
                        }
                    }, 1000);

                    respuesta.value = '';
                    respuesta.focus();
                }
                
                function verificarRespuesta() {
                    const respuestaUsuario = Number(respuesta.value);
                    
                    if (isNaN(respuestaUsuario)) {
                        return;
                    }
                    
                    clearInterval(temporizador);
                    
                    if (respuestaUsuario === respuestaCorrecta) {
                        puntuacion++;
                        actualizarPuntuacion();
                        mensaje.textContent = "¬°Correcto!";
                    } else {
                        mensaje.textContent = `Incorrecto. La respuesta era ${respuestaCorrecta}`;
                    }
                    
                    setTimeout(() => {
                        generarProblema();
                    }, 1500);
                }
                
                function actualizarPuntuacion() {
                    const porcentaje = Math.round((puntuacion / preguntaActual) * 100) || 0;
                    puntuacionActual.textContent = porcentaje;
                }
                
                function terminarPartida() {
                    clearInterval(temporizador);
                    
                    const porcentajeFinal = Math.round((puntuacion / totalPreguntas) * 100);
                    historial.push({ nombre: nombreParticipante, puntuacion: porcentajeFinal });
                    historial.sort((a, b) => b.puntuacion - a.puntuacion);
                    localStorage.setItem('historialMultiplicacion', JSON.stringify(historial));

                    actualizarHistorial();

                    resultadoFinal.textContent = `¬°Juego terminado! Obtuviste ${puntuacion} de ${totalPreguntas} respuestas correctas (${porcentajeFinal}%)`;

                    reiniciarBtn.style.display = 'block';
                }
                
                function reiniciarJuego() {
                    clearInterval(temporizador);
                    inicio.style.display = 'flex';
                    nombreInput.value = "";
                    contenedor.style.display = 'none';
                }
                
                function actualizarHistorial() {
                    listaHistorial.innerHTML = '';

                    historial.forEach(participante => {
                        const tr = document.createElement('tr');
                        const tdNombre = document.createElement('td');
                        tdNombre.textContent = participante.nombre;
                        const tdPuntuacion = document.createElement('td');
                        tdPuntuacion.textContent = `${participante.puntuacion}%`;

                        tr.appendChild(tdNombre);
                        tr.appendChild(tdPuntuacion);
                        listaHistorial.appendChild(tr);
                    });
                }
                
                function barrerHistorial() {
                    historial = [];
                    localStorage.removeItem('historialMultiplicacion');
                    actualizarHistorial();
                }
                
                // Configurar event listeners
                comenzarBtn.addEventListener('click', iniciarJuego);
                terminarBtn.addEventListener('click', terminarPartida);
                reiniciarBtn.addEventListener('click', reiniciarJuego);
                barrerBtn.addEventListener('click', barrerHistorial);
                respuesta.addEventListener('keyup', function(e) {
                    if (e.key === 'Enter') {
                        verificarRespuesta();
                    }
                });
                
                // Inicializar historial
                actualizarHistorial();
            }
            
            // Funci√≥n para inicializar el juego de suma
            function initSumaGame() {
                let tiempoRestante, temporizador;
                let puntuacion = 0;
                let preguntaActual = 0;
                let totalPreguntas = 15;
                let nombreParticipante = "";
                let respuestaCorrecta = null;
                let historial = JSON.parse(localStorage.getItem('historialSuma')) || [];
                
                const nombreInput = document.getElementById('sumaNombreInput');
                const comenzarBtn = document.getElementById('sumaComenzarBtn');
                const contenedor = document.getElementById('sumaContenedor');
                const inicio = document.getElementById('sumaInicio');
                const preguntaActualElement = document.getElementById('sumaPreguntaActual');
                const puntuacionActual = document.getElementById('sumaPuntuacionActual');
                const temporizadorElement = document.getElementById('sumaTemporizador');
                const problema = document.getElementById('sumaProblema');
                const respuesta = document.getElementById('sumaRespuesta');
                const mensaje = document.getElementById('sumaMensaje');
                const resultadoFinal = document.getElementById('sumaResultadoFinal');
                const terminarBtn = document.getElementById('sumaTerminarBtn');
                const reiniciarBtn = document.getElementById('sumaReiniciarBtn');
                const listaHistorial = document.getElementById('sumaListaHistorial');
                const barrerBtn = document.getElementById('sumaBarrerBtn');
                
                function iniciarJuego() {
                    nombreParticipante = nombreInput.value.trim();
                    if (nombreParticipante === "") {
                        alert("Por favor, escribe tu nombre.");
                        return;
                    }

                    inicio.style.display = 'none';
                    contenedor.style.display = 'flex';

                    puntuacion = 0;
                    preguntaActual = 0;
                    actualizarPuntuacion();
                    reiniciarBtn.style.display = 'none';
                    resultadoFinal.textContent = '';
                    mensaje.textContent = '';

                    generarProblema();
                }
                
                function generarProblema() {
                    if (preguntaActual >= totalPreguntas) {
                        terminarPartida();
                        return;
                    }
                    
                    preguntaActual++;
                    preguntaActualElement.textContent = preguntaActual;
                    
                    const num1 = Math.floor(Math.random() * 50) + 1;
                    const num2 = Math.floor(Math.random() * 50) + 1;
                    respuestaCorrecta = num1 + num2;
                    problema.textContent = `${num1} + ${num2} = ?`;
                    
                    tiempoRestante = 8;
                    temporizadorElement.textContent = `Tiempo: ${tiempoRestante}`;
                    
                    clearInterval(temporizador);
                    temporizador = setInterval(() => {
                        tiempoRestante--;
                        temporizadorElement.textContent = `Tiempo: ${tiempoRestante}`;

                        if (tiempoRestante <= 0) {
                            clearInterval(temporizador);
                            mensaje.textContent = "¬°Tiempo agotado!";
                            setTimeout(() => {
                                generarProblema();
                            }, 1500);
                        }
                    }, 1000);

                    respuesta.value = '';
                    respuesta.focus();
                }
                
                function verificarRespuesta() {
                    const respuestaUsuario = Number(respuesta.value);
                    
                    if (isNaN(respuestaUsuario)) {
                        return;
                    }
                    
                    clearInterval(temporizador);
                    
                    if (respuestaUsuario === respuestaCorrecta) {
                        puntuacion++;
                        actualizarPuntuacion();
                        mensaje.textContent = "¬°Correcto!";
                    } else {
                        mensaje.textContent = `Incorrecto. La respuesta era ${respuestaCorrecta}`;
                    }
                    
                    setTimeout(() => {
                        generarProblema();
                    }, 1500);
                }
                
                function actualizarPuntuacion() {
                    const porcentaje = Math.round((puntuacion / preguntaActual) * 100) || 0;
                    puntuacionActual.textContent = porcentaje;
                }
                
                function terminarPartida() {
                    clearInterval(temporizador);
                    
                    const porcentajeFinal = Math.round((puntuacion / totalPreguntas) * 100);
                    historial.push({ nombre: nombreParticipante, puntuacion: porcentajeFinal });
                    historial.sort((a, b) => b.puntuacion - a.puntuacion);
                    localStorage.setItem('historialSuma', JSON.stringify(historial));

                    actualizarHistorial();

                    resultadoFinal.textContent = `¬°Juego terminado! Obtuviste ${puntuacion} de ${totalPreguntas} respuestas correctas (${porcentajeFinal}%)`;

                    reiniciarBtn.style.display = 'block';
                }
                
                function reiniciarJuego() {
                    clearInterval(temporizador);
                    inicio.style.display = 'flex';
                    nombreInput.value = "";
                    contenedor.style.display = 'none';
                }
                
                function actualizarHistorial() {
                    listaHistorial.innerHTML = '';

                    historial.forEach(participante => {
                        const tr = document.createElement('tr');
                        const tdNombre = document.createElement('td');
                        tdNombre.textContent = participante.nombre;
                        const tdPuntuacion = document.createElement('td');
                        tdPuntuacion.textContent = `${participante.puntuacion}%`;

                        tr.appendChild(tdNombre);
                        tr.appendChild(tdPuntuacion);
                        listaHistorial.appendChild(tr);
                    });
                }
                
                function barrerHistorial() {
                    historial = [];
                    localStorage.removeItem('historialSuma');
                    actualizarHistorial();
                }
                
                // Configurar event listeners
                comenzarBtn.addEventListener('click', iniciarJuego);
                terminarBtn.addEventListener('click', terminarPartida);
                reiniciarBtn.addEventListener('click', reiniciarJuego);
                barrerBtn.addEventListener('click', barrerHistorial);
                respuesta.addEventListener('keyup', function(e) {
                    if (e.key === 'Enter') {
                        verificarRespuesta();
                    }
                });
                
                // Inicializar historial
                actualizarHistorial();
            }
            
            // Funci√≥n para inicializar el juego de resta
            function initRestaGame() {
                let tiempoRestante, temporizador;
                let puntuacion = 0;
                let preguntaActual = 0;
                let totalPreguntas = 15;
                let nombreParticipante = "";
                let respuestaCorrecta = null;
                let historial = JSON.parse(localStorage.getItem('historialResta')) || [];
                
                const nombreInput = document.getElementById('restaNombreInput');
                const comenzarBtn = document.getElementById('restaComenzarBtn');
                const contenedor = document.getElementById('restaContenedor');
                const inicio = document.getElementById('restaInicio');
                const preguntaActualElement = document.getElementById('restaPreguntaActual');
                const puntuacionActual = document.getElementById('restaPuntuacionActual');
                const temporizadorElement = document.getElementById('restaTemporizador');
                const problema = document.getElementById('restaProblema');
                const respuesta = document.getElementById('restaRespuesta');
                const mensaje = document.getElementById('restaMensaje');
                const resultadoFinal = document.getElementById('restaResultadoFinal');
                const terminarBtn = document.getElementById('restaTerminarBtn');
                const reiniciarBtn = document.getElementById('restaReiniciarBtn');
                const listaHistorial = document.getElementById('restaListaHistorial');
                const barrerBtn = document.getElementById('restaBarrerBtn');
                
                function iniciarJuego() {
                    nombreParticipante = nombreInput.value.trim();
                    if (nombreParticipante === "") {
                        alert("Por favor, escribe tu nombre.");
                        return;
                    }

                    inicio.style.display = 'none';
                    contenedor.style.display = 'flex';

                    puntuacion = 0;
                    preguntaActual = 0;
                    actualizarPuntuacion();
                    reiniciarBtn.style.display = 'none';
                    resultadoFinal.textContent = '';
                    mensaje.textContent = '';

                    generarProblema();
                }
                
                function generarProblema() {
                    if (preguntaActual >= totalPreguntas) {
                        terminarPartida();
                        return;
                    }
                    
                    preguntaActual++;
                    preguntaActualElement.textContent = preguntaActual;
                    
                    const num1 = Math.floor(Math.random() * 50) + 50;
                    const num2 = Math.floor(Math.random() * 49) + 1;
                    respuestaCorrecta = num1 - num2;
                    problema.textContent = `${num1} - ${num2} = ?`;
                    
                    tiempoRestante = 8;
                    temporizadorElement.textContent = `Tiempo: ${tiempoRestante}`;
                    
                    clearInterval(temporizador);
                    temporizador = setInterval(() => {
                        tiempoRestante--;
                        temporizadorElement.textContent = `Tiempo: ${tiempoRestante}`;

                        if (tiempoRestante <= 0) {
                            clearInterval(temporizador);
                            mensaje.textContent = "¬°Tiempo agotado!";
                            setTimeout(() => {
                                generarProblema();
                            }, 1500);
                        }
                    }, 1000);

                    respuesta.value = '';
                    respuesta.focus();
                }
                
                function verificarRespuesta() {
                    const respuestaUsuario = Number(respuesta.value);
                    
                    if (isNaN(respuestaUsuario)) {
                        return;
                    }
                    
                    clearInterval(temporizador);
                    
                    if (respuestaUsuario === respuestaCorrecta) {
                        puntuacion++;
                        actualizarPuntuacion();
                        mensaje.textContent = "¬°Correcto!";
                    } else {
                        mensaje.textContent = `Incorrecto. La respuesta era ${respuestaCorrecta}`;
                    }
                    
                    setTimeout(() => {
                        generarProblema();
                    }, 1500);
                }
                
                function actualizarPuntuacion() {
                    const porcentaje = Math.round((puntuacion / preguntaActual) * 100) || 0;
                    puntuacionActual.textContent = porcentaje;
                }
                
                function terminarPartida() {
                    clearInterval(temporizador);
                    
                    const porcentajeFinal = Math.round((puntuacion / totalPreguntas) * 100);
                    historial.push({ nombre: nombreParticipante, puntuacion: porcentajeFinal });
                    historial.sort((a, b) => b.puntuacion - a.puntuacion);
                    localStorage.setItem('historialResta', JSON.stringify(historial));

                    actualizarHistorial();

                    resultadoFinal.textContent = `¬°Juego terminado! Obtuviste ${puntuacion} de ${totalPreguntas} respuestas correctas (${porcentajeFinal}%)`;

                    reiniciarBtn.style.display = 'block';
                }
                
                function reiniciarJuego() {
                    clearInterval(temporizador);
                    inicio.style.display = 'flex';
                    nombreInput.value = "";
                    contenedor.style.display = 'none';
                }
                
                function actualizarHistorial() {
                    listaHistorial.innerHTML = '';

                    historial.forEach(participante => {
                        const tr = document.createElement('tr');
                        const tdNombre = document.createElement('td');
                        tdNombre.textContent = participante.nombre;
                        const tdPuntuacion = document.createElement('td');
                        tdPuntuacion.textContent = `${participante.puntuacion}%`;

                        tr.appendChild(tdNombre);
                        tr.appendChild(tdPuntuacion);
                        listaHistorial.appendChild(tr);
                    });
                }
                
                function barrerHistorial() {
                    historial = [];
                    localStorage.removeItem('historialResta');
                    actualizarHistorial();
                }
                
                // Configurar event listeners
                comenzarBtn.addEventListener('click', iniciarJuego);
                terminarBtn.addEventListener('click', terminarPartida);
                reiniciarBtn.addEventListener('click', reiniciarJuego);
                barrerBtn.addEventListener('click', barrerHistorial);
                respuesta.addEventListener('keyup', function(e) {
                    if (e.key === 'Enter') {
                        verificarRespuesta();
                    }
                });
                
                // Inicializar historial
                actualizarHistorial();
            }
            
            // Funci√≥n para inicializar el juego de calculadora humana
            function initCalculadoraGame() {
                let tiempoRestante, temporizador;
                let currentResult = 1;
                let puntuacion = 0;
                let nombreParticipante = "";
                let historialRespuestas = [];
                let historial = JSON.parse(localStorage.getItem('historialConstruccion')) || [];
                let ultimaOperacion = null;
                let operacionConsecutivaCount = { suma: 0, resta: 0, multiplicacion: 0 };
                let respuestaCorrecta = null;
                
                const nombreInput = document.getElementById('calculadoraNombreInput');
                const comenzarBtn = document.getElementById('calculadoraComenzarBtn');
                const contenedor = document.getElementById('calculadoraContenedor');
                const inicio = document.getElementById('calculadoraInicio');
                const pasoActual = document.getElementById('calculadoraPasoActual');
                const puntuacionActual = document.getElementById('calculadoraPuntuacionActual');
                const tipoOperacion = document.getElementById('calculadoraTipoOperacion');
                const temporizadorElement = document.getElementById('calculadoraTemporizador');
                const secuenciaValor = document.getElementById('calculadoraSecuenciaValor');
                const problema = document.getElementById('calculadoraProblema');
                const respuesta = document.getElementById('calculadoraRespuesta');
                const mensaje = document.getElementById('calculadoraMensaje');
                const resultadoFinal = document.getElementById('calculadoraResultadoFinal');
                const terminarBtn = document.getElementById('calculadoraTerminarBtn');
                const reiniciarBtn = document.getElementById('calculadoraReiniciarBtn');
                const puzzleContainer = document.getElementById('calculadoraPuzzleContainer');
                const listaHistorial = document.getElementById('calculadoraListaHistorial');
                const barrerBtn = document.getElementById('calculadoraBarrerBtn');
                
                function iniciarJuego() {
                    nombreParticipante = nombreInput.value.trim();
                    if (nombreParticipante === "") {
                        alert("Por favor, escribe tu nombre.");
                        return;
                    }

                    inicio.style.display = 'none';
                    contenedor.style.display = 'flex';

                    puntuacion = 0;
                    currentResult = 1;
                    ultimaOperacion = null;
                    operacionConsecutivaCount = { suma: 0, resta: 0, multiplicacion: 0 };
                    historialRespuestas = [];
                    puzzleContainer.innerHTML = '';
                    actualizarPuntuacion();
                    pasoActual.textContent = puntuacion;
                    secuenciaValor.textContent = currentResult;
                    reiniciarBtn.style.display = 'none';
                    resultadoFinal.textContent = '';
                    mensaje.textContent = '';

                    tiempoRestante = 120;
                    temporizadorElement.textContent = `Tiempo: ${tiempoRestante}`;
                    temporizador = setInterval(() => {
                        tiempoRestante--;
                        temporizadorElement.textContent = `Tiempo: ${tiempoRestante}`;

                        if (tiempoRestante <= 0) {
                            clearInterval(temporizador);
                            historialRespuestas.push({
                                pregunta: problema.textContent,
                                correcta: false,
                                respuestaUsuario: "Tiempo agotado",
                                respuestaCorrecta: respuestaCorrecta
                            });
                            terminarPartida();
                        }
                    }, 1000);

                    generarProblema();
                }
                
                function terminarPartida() {
                    clearInterval(temporizador);

                    const jerarquia = obtenerJerarquia(puntuacion);
                    historial.push({ nombre: nombreParticipante, puntuacion: puntuacion, jerarquia: jerarquia });
                    historial.sort((a, b) => b.puntuacion - a.puntuacion);
                    localStorage.setItem('historialConstruccion', JSON.stringify(historial));

                    actualizarHistorial();

                    temporizadorElement.classList.add('game-ocultar');
                    problema.classList.add('game-ocultar');
                    respuesta.classList.add('game-ocultar');
                    mensaje.classList.add('game-ocultar');
                    terminarBtn.classList.add('game-ocultar');
                    document.getElementById('calculadoraOperacionActual').classList.add('game-ocultar');
                    document.getElementById('calculadoraSecuencia').classList.add('game-ocultar');
                    puzzleContainer.innerHTML = '';

                    const reconocimientoHTML = obtenerReconocimiento(nombreParticipante, puntuacion);
                    resultadoFinal.innerHTML = reconocimientoHTML;

                    reiniciarBtn.style.display = 'block';
                }
                
                function reiniciarJuego() {
                    clearInterval(temporizador);
                    inicio.style.display = 'flex';
                    nombreInput.value = "";
                    contenedor.style.display = 'none';

                    temporizadorElement.classList.remove('game-ocultar');
                    problema.classList.remove('game-ocultar');
                    respuesta.classList.remove('game-ocultar');
                    mensaje.classList.remove('game-ocultar');
                    terminarBtn.classList.remove('game-ocultar');
                    document.getElementById('calculadoraOperacionActual').classList.remove('game-ocultar');
                    document.getElementById('calculadoraSecuencia').classList.remove('game-ocultar');
                }
                
                function generarProblema() {
                    let num2;
                    let operacion;

                    if (ultimaOperacion && operacionConsecutivaCount[ultimaOperacion] >= 3) {
                        const operaciones = ['suma', 'resta', 'multiplicacion'].filter(op => op !== ultimaOperacion);
                        operacion = operaciones[Math.floor(Math.random() * operaciones.length)];
                    } else {
                        const operaciones = ['suma', 'resta', 'multiplicacion'];
                        operacion = operaciones[Math.floor(Math.random() * operaciones.length)];
                    }

                    tipoOperacion.textContent = operacion.charAt(0).toUpperCase() + operacion.slice(1);

                    if (operacion === 'suma') {
                        num2 = Math.min(20 - currentResult, 19);
                        if (num2 <= 0) num2 = 1;
                        num2 = Math.floor(Math.random() * num2) + 1;
                        respuestaCorrecta = currentResult + num2;
                        problema.textContent = `${currentResult} + ${num2} = ?`;
                        ultimaOperacion = 'suma';
                        operacionConsecutivaCount['suma']++;
                        operacionConsecutivaCount['resta'] = 0;
                        operacionConsecutivaCount['multiplicacion'] = 0;
                    } else if (operacion === 'resta') {
                        num2 = Math.floor(Math.random() * currentResult) + 1;
                        if (currentResult === 0) {
                            num2 = 0;
                        }
                        respuestaCorrecta = currentResult - num2;
                        problema.textContent = `${currentResult} - ${num2} = ?`;
                        ultimaOperacion = 'resta';
                        operacionConsecutivaCount['resta']++;
                        operacionConsecutivaCount['suma'] = 0;
                        operacionConsecutivaCount['multiplicacion'] = 0;
                    } else if (operacion === 'multiplicacion') {
                        let maxFactor = Math.min(Math.floor(20 / currentResult), 10);
                        if (maxFactor < 2) maxFactor = 2;
                        num2 = Math.floor(Math.random() * (maxFactor - 1)) + 2;
                        if (currentResult * num2 > 20) num2 = Math.floor(20 / currentResult);
                        if (currentResult === 0) num2 = 1;
                        respuestaCorrecta = currentResult * num2;
                        problema.textContent = `${currentResult} √ó ${num2} = ?`;
                        ultimaOperacion = 'multiplicacion';
                        operacionConsecutivaCount['multiplicacion']++;
                        operacionConsecutivaCount['suma'] = 0;
                        operacionConsecutivaCount['resta'] = 0;
                    }

                    respuesta.value = '';
                    respuesta.focus();
                    mensaje.innerHTML = '';
                }
                
                function actualizarPuntuacion() {
                    puntuacionActual.textContent = puntuacion;
                    pasoActual.textContent = puntuacion;
                }
                
                function addPuzzlePiece() {
                    const piece = document.createElement('div');
                    piece.classList.add('game-puzzle-piece');
                    puzzleContainer.appendChild(piece);
                }
                
                respuesta.addEventListener('input', function (e) {
                    const respuestaUsuario = Number(e.target.value);
                    if (isNaN(respuestaUsuario) || e.target.value === '') {
                        return;
                    }

                    if (respuestaUsuario === respuestaCorrecta) {
                        puntuacion++;
                        currentResult = respuestaCorrecta;
                        secuenciaValor.textContent = currentResult;
                        actualizarPuntuacion();

                        const emojis = ["üòäüëç", "üéâ", "üåü", "üöÄ", "üòé"];
                        const mensajes = ["¬°Genial!", "¬°Excelente!", "¬°Muy bien!", "¬°Sigue as√≠!", "¬°Correcto!"];
                        const mensajeAleatorio = mensajes[Math.floor(Math.random() * mensajes.length)] + " " + emojis[Math.floor(Math.random() * emojis.length)];

                        const mensajeDiv = document.createElement('div');
                        mensajeDiv.textContent = mensajeAleatorio;
                        mensajeDiv.classList.add('game-burbuja');
                        mensaje.appendChild(mensajeDiv);

                        historialRespuestas.push({
                            pregunta: problema.textContent,
                            correcta: true,
                            respuestaUsuario: respuestaUsuario,
                            respuestaCorrecta: respuestaCorrecta
                        });

                        addPuzzlePiece();

                        setTimeout(() => {
                            mensajeDiv.remove();
                            e.target.value = '';
                            generarProblema();
                        }, 1500);
                    }
                });
                
                nombreInput.addEventListener('keydown', function(event) {
                    if (event.key === "Enter") {
                        iniciarJuego();
                    }
                });
                
                function obtenerJerarquia(puntuacion) {
                    if (puntuacion >= 35) {
                        return "√âlite";
                    } else if (puntuacion >= 25) {
                        return "Experto";
                    } else if (puntuacion >= 15) {
                        return "Entrenado";
                    } else {
                        return "Iniciado";
                    }
                }
                
                function obtenerReconocimiento(nombre, puntuacion) {
                    let mensaje = "";
                    let categoria = obtenerJerarquia(puntuacion);

                    if (puntuacion >= 35) {
                        mensaje = `
                            <div class="game-reconocimiento">
                                <h1>Instituto para Sordos Santa Rosa</h1>
                                <h2>Reconocimiento Calculadora Humana</h2>
                                <p><strong>¬°Felicidades, ${nombre}!</strong></p>
                                <p>Participante ${categoria} con ${puntuacion} pasos.</p>
                                <p>Profesor Miguel Ubiera</p>
                            </div>
                        `;
                    } else if (puntuacion >= 25) {
                        mensaje = `
                            <div class="game-reconocimiento">
                                <h1>Instituto para Sordos Santa Rosa</h1>
                                <h2>Reconocimiento Calculadora Humana</h2>
                                <p><strong>¬°Bien hecho, ${nombre}!</strong></p>
                                <p>Participante ${categoria} con ${puntuacion} pasos.</p>
                                <p>Profesor Miguel Ubiera</p>
                            </div>
                        `;
                    } else if (puntuacion >= 15) {
                        mensaje = `
                            <div class="game-reconocimiento">
                                <h1>Instituto para Sordos Santa Rosa</h1>
                                <h2>Reconocimiento Calculadora Humana</h2>
                                <p><strong>¬°Buen esfuerzo, ${nombre}!</strong></p>
                                <p>Participante ${categoria} con ${puntuacion} pasos.</p>
                                <p>Profesor Miguel Ubiera</p>
                            </div>
                        `;
                    } else {
                        mensaje = `
                            <div class="game-reconocimiento">
                                <h1>Instituto para Sordos Santa Rosa</h1>
                                <h2>Reconocimiento Calculadora Humana</h2>
                                <p><strong>¬°√Ånimo, ${nombre}!</strong></p>
                                <p>Participante ${categoria} con ${puntuacion} pasos.</p>
                                <p>Profesor Miguel Ubiera</p>
                            </div>
                        `;
                    }
                    return mensaje;
                }
                
                function actualizarHistorial() {
                    listaHistorial.innerHTML = '';

                    historial.forEach(participante => {
                        const tr = document.createElement('tr');
                        const tdNombre = document.createElement('td');
                        tdNombre.textContent = participante.nombre;
                        const tdPuntuacion = document.createElement('td');
                        tdPuntuacion.textContent = `${participante.puntuacion} pasos`;
                        const tdJerarquia = document.createElement('td');
                        tdJerarquia.textContent = participante.jerarquia;

                        if (participante.puntuacion >= 35) {
                            tdPuntuacion.classList.add('game-elite');
                            tdJerarquia.classList.add('game-elite');
                        } else if (participante.puntuacion >= 25) {
                            tdPuntuacion.classList.add('game-experto');
                            tdJerarquia.classList.add('game-experto');
                        } else if (participante.puntuacion >= 15) {
                            tdPuntuacion.classList.add('game-entrenado');
                            tdJerarquia.classList.add('game-entrenado');
                        } else {
                            tdPuntuacion.classList.add('game-iniciado');
                            tdJerarquia.classList.add('game-iniciado');
                        }

                        tr.appendChild(tdNombre);
                        tr.appendChild(tdPuntuacion);
                        tr.appendChild(tdJerarquia);
                        listaHistorial.appendChild(tr);
                    });
                }
                
                function barrerHistorial() {
                    historial = [];
                    localStorage.removeItem('historialConstruccion');
                    actualizarHistorial();
                }
                
                // Configurar event listeners
                comenzarBtn.addEventListener('click', iniciarJuego);
                terminarBtn.addEventListener('click', terminarPartida);
                reiniciarBtn.addEventListener('click', reiniciarJuego);
                barrerBtn.addEventListener('click', barrerHistorial);
                
                // Inicializar historial
                actualizarHistorial();
            }
            
            // Funci√≥n para inicializar el sorteo
            function initSorteo() {
                const realizarSorteoBtn = document.getElementById('realizarSorteoBtn');
                const estudiantesInput = document.getElementById('estudiantesInput');
                const resultadoSorteo = document.getElementById('resultadoSorteo');
                const ganadorSorteo = document.getElementById('ganadorSorteo');
                
                realizarSorteoBtn.addEventListener('click', function() {
                    const estudiantes = estudiantesInput.value.split('\n').filter(nombre => nombre.trim() !== '');
                    
                    if (estudiantes.length === 0) {
                        alert("Por favor, ingresa al menos un nombre de estudiante.");
                        return;
                    }
                    
                    const indiceGanador = Math.floor(Math.random() * estudiantes.length);
                    const ganador = estudiantes[indiceGanador];
                    
                    ganadorSorteo.textContent = ganador;
                    resultadoSorteo.style.display = 'block';
                });
            }
            
            // Filtrar por categor√≠a
            categoryButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Quitar clase active de todos los botones
                    categoryButtons.forEach(btn => btn.classList.remove('active'));
                    
                    // A√±adir clase active al bot√≥n clickeado
                    this.classList.add('active');
                    
                    const category = this.getAttribute('data-category');
                    
                    // Mostrar spinner de carga
                    loadingSpinner.style.display = 'block';
                    
                    setTimeout(() => {
                        // Mostrar/ocultar actividades seg√∫n categor√≠a
                        activityCards.forEach(card => {
                            if (category === 'all' || card.getAttribute('data-category') === category) {
                                card.style.display = 'block';
                                setTimeout(() => {
                                    card.style.opacity = '1';
                                    card.style.transform = 'translateY(0) scale(1)';
                                }, 50);
                            } else {
                                card.style.opacity = '0';
                                card.style.transform = 'translateY(20px) scale(0.95)';
                                setTimeout(() => {
                                    card.style.display = 'none';
                                }, 300);
                            }
                        });
                        
                        loadingSpinner.style.display = 'none';
                    }, 300);
                });
            });
            
            // Buscar actividades - Filtrado en tiempo real
            searchInput.addEventListener('input', searchActivities);
            searchButton.addEventListener('click', searchActivities);
            
            function searchActivities() {
                const searchText = searchInput.value.toLowerCase();
                
                activityCards.forEach((card, index) => {
                    const title = card.querySelector('.card-header h3').textContent.toLowerCase();
                    const description = card.querySelector('.card-body p').textContent.toLowerCase();
                    const shouldShow = title.includes(searchText) || description.includes(searchText);
                    
                    // Transici√≥n suave
                    card.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
                    
                    if (shouldShow) {
                        card.style.display = 'block';
                        setTimeout(() => {
                            card.style.opacity = '1';
                            card.style.transform = 'translateY(0) scale(1)';
                        }, index * 50);
                    } else {
                        card.style.opacity = '0';
                        card.style.transform = 'translateY(20px) scale(0.95)';
                        setTimeout(() => {
                            card.style.display = 'none';
                        }, 300);
                    }
                });
            }
        });
    </script>
</body>
</html>