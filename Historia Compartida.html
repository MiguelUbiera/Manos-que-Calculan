<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sorteo de Aventura Navide√±a - IPSR</title>
    <style>
        /* --- Paleta Navide√±a --- */
        :root {
            --primary: #C62828; /* Rojo Navidad */
            --secondary: #1B5E20; /* Verde Abeto */
            --accent: #FFD700; /* Dorado/Amarillo */
            --light: #f5f5f5;
            --dark: #212121;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f9f9f9;
            color: var(--dark);
            line-height: 1.6;
            position: relative;
            overflow-x: hidden;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            /* Fondo con patr√≥n navide√±o sutil */
            background-image: linear-gradient(45deg, var(--light) 25%, transparent 25%),
                              linear-gradient(-45deg, var(--light) 25%, transparent 25%),
                              linear-gradient(45deg, transparent 75%, var(--light) 75%),
                              linear-gradient(-45deg, transparent 75%, var(--light) 75%);
            background-size: 20px 20px;
            background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
        }

        /* Animaciones y elementos flotantes omitidos por brevedad pero funcionales */
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }
        @keyframes seleccionarTarjeta { 0% { opacity: 0; transform: translateY(-30px); } 100% { opacity: 1; transform: translateY(0); } }
        .floating-element { position: fixed; font-size: 2.8rem; opacity: 0.2; z-index: -1; pointer-events: none; animation: floatElement 15s infinite ease-in-out alternate; }
        @keyframes floatElement { 0% { transform: translate(0, 0); } 50% { transform: translate(15px, -15px); } 100% { transform: translate(0, 0); } }
        /* (Clases de .floating-element:nth-child(...) omitidas) */

        /* --- Encabezado --- */
        .encabezado {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 1rem 0;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            border-bottom: 5px solid var(--accent);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 800px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Contenedor principal */
        .container {
            margin: 30px auto;
            padding: 40px 20px;
            max-width: 850px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            text-align: center;
            flex: 1;
        }

        /* --- Sorteo Dual (Punto 1: Disposici√≥n Horizontal) --- */
        .sorteo-dual {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .resultado-card {
            background: var(--light);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            min-width: 300px;
            height: 150px; /* Reducido para compactar */
            display: flex;
            flex-direction: column;
            justify-content: center;
            border: 3px dashed var(--secondary);
        }

        /* Modificaci√≥n: Reducci√≥n de letra general (Punto 3) */
        
        /* Titulo de Curso: 5to de Secundaria */
        .grado {
            font-size: 1.5rem; /* Reducido de 1.8rem */
            font-weight: bold;
            color: var(--secondary);
            margin-bottom: 15px;
        }

        /* Titulo de Tarjeta: Estudiante/Objeto */
        .card-titulo {
            font-size: 1.0rem; /* Reducido de 1.2rem */
            color: var(--primary);
            margin-bottom: 5px;
            font-style: italic;
        }

        /* Resultado Estudiante + Objeto (Se mantiene visible) */
        #resultado-nombre {
            font-size: 1.2rem; /* Reducido de 1.4rem */
            font-weight: bold;
            color: var(--dark);
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: seleccionarTarjeta 1.5s ease-out;
            margin-top: 5px;
        }

        /* Resultado Objeto solo */
        #resultado-objeto {
            font-size: 1.6rem; /* Reducido de 2.0rem */
            font-weight: bold;
            color: var(--secondary);
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: seleccionarTarjeta 1.5s ease-out;
            margin-top: 5px;
        }

        /* Botones */
        .controls {
            margin-top: 25px;
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        .controls button {
            padding: 10px 20px; /* Reducido de 12px 25px */
            font-size: 1.0rem; /* Reducido de 1.1rem */
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s;
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.15);
        }

        /* Lista de turnos */
        #seleccionados h3 {
            font-size: 1.4rem; /* Reducido de 1.6rem */
            color: var(--primary);
            margin-bottom: 10px;
        }
        #listaSeleccionados li {
            font-size: 1.0rem; /* Reducido de 1.1rem */
            color: var(--dark);
            padding: 6px; /* Reducido de 8px */
            border-bottom: 1px dotted #eee;
            display: flex;
            gap: 10px;
            font-weight: 500;
        }
        /* Media Query para m√≥viles */
        @media (max-width: 700px) {
            .sorteo-dual { flex-direction: column; gap: 15px; }
            .resultado-card { min-width: 95%; height: 130px; }
            #resultado-nombre { font-size: 1.0rem; }
            #resultado-objeto { font-size: 1.4rem; }
        }
    </style>
</head>
<body>
    <div class="floating-element" style="top: 5%; left: 3%;">‚ùÑÔ∏è</div>
    <div class="floating-element" style="top: 15%; right: 5%;">üç¨</div>
    <div class="floating-element" style="top: 25%; left: 8%;">üîî</div>
    <div class="floating-element" style="top: 35%; right: 10%;">üéÅ</div>
    <div class="floating-element" style="top: 45%; left: 5%;">üéÑ</div>
    <div class="floating-element" style="top: 55%; right: 7%;">‚ùÑÔ∏è</div>
    <div class="floating-element" style="top: 65%; left: 12%;">üç¨</div>
    <div class="floating-element" style="top: 75%; right: 9%;">üîî</div>
    <div class="floating-element" style="top: 20%; left: 20%;">üéÅ</div>
    <div class="floating-element" style="top: 40%; right: 22%;">üéÑ</div>
    <div class="floating-element" style="top: 60%; left: 30%;">‚ùÑÔ∏è</div>
    <div class="floating-element" style="top: 30%; right: 32%;">üç¨</div>
    <div class="floating-element" style="top: 50%; left: 40%;">üîî</div>
    <div class="floating-element" style="top: 70%; right: 42%;">üéÅ</div>
    <div class="floating-element" style="top: 10%; right: 25%;">üéÑ</div>
    <div class="floating-element" style="top: 80%; left: 25%;">‚ùÑÔ∏è</div>
    <div class="floating-element" style="top: 35%; left: 75%;">üç¨</div>
    <div class="floating-element" style="top: 65%; right: 75%;">üîî</div>

    <div class="encabezado">
        <div class="header-content">
            <div class="child-figure" id="left-child"><div>üåü</div></div> 
            <div class="logo">
                <h1>Aventura Navide√±a Familiar</h1>
            </div>
            <div class="child-figure" id="right-child"><div>üåü</div></div> 
        </div>
        <div class="sub-titulo">¬°Inventemos historias incre√≠bles con Manos que Crean!</div>
    </div>

    <div class="container">
        <div id="pantalla-inicial" style="display: none;"></div>

        <div id="pantalla-sorteo" style="display: block;"> 
            <div class="grado" id="grado"></div>

            <div class="sorteo-dual">
                <div class="resultado-card">
                    <div class="card-titulo"><span class="emoji">üßë‚Äçüéì</span> Estudiante Seleccionado:</div>
                    <div id="resultado-nombre">Presiona "Sacar Estudiante"</div>
                </div>

                <div class="resultado-card">
                    <div class="card-titulo"><span class="emoji">üó∫Ô∏è</span> Elemento de la Historia:</div>
                    <div id="resultado-objeto">...</div>
                </div>
            </div>

            <div class="controls">
                <button id="sortearBtn">Sacar Estudiante</button>
                <button id="sacarObjetoBtn" disabled>Sacar Objeto</button>
            </div>

            <div id="seleccionados">
                <h3>üë• Turnos de Aventura:</h3>
                <ul id="listaSeleccionados">
                    <li>¬°Aqu√≠ aparecer√°n los turnos!</li>
                </ul>
            </div>
        </div>
    </div>

    <footer>
        <p>Instituto para Sordos Santa Rosa, Inc.</p>
        <p>¬© 2025</p>
    </footer>

    <script>
        // --- COLECCI√ìN DE DATOS ---
        const estudiantesPorCurso = {
            "5to": [
                "Melissa Bayona Fuentes", "Paula Chanely Carrasco Ogando", "Milagros De Jes√∫s Santana",
                "Abigail Ariela Gat√≥n Mora", "G√©nesis Massiel Paula", "Emily Alamna Medrano Figueroa",
                "Juanes Jes√∫s Mena Bautista", "Rafael Josu√© Minyetty Torres", "Estrella Mar√≠a Mongouin Reveav",
                "Jonawersd Prado", "Wesley Ram√≠rez Encarnaci√≥n", "Edgar Evaristo Serrata Hiraldo",
                "Mois√©s Enmanuel Valdez Mateo", "Esmeralda V√°squez Montero", "Miguel Josu√© Villam√°n Tejada",
                "Norkis Camila Reynoso P√©rez"
            ]
        };

        const elementosHistoriaBase = [
            "Casa üè†", "Carro üöó", "Perro üê∂", "Gato üêà", "√Årbol üå≥", "Pelota ‚öΩ", "Comida üç≤",
            "M√∫sica üéµ", "Beb√© üë∂", "Maestro/a üë©‚Äçüè´", "Playa üèñÔ∏è", "Nieve ‚ùÑÔ∏è", "Tel√©fono üì±",
            "Zapato üëü", "Camisa üëï", "Cama üõèÔ∏è", "Bandera üá©üá¥", "Libro üìö"
        ];

        // Variables de estado
        let disponibles = [];
        let elementosDisponibles = [];
        let seleccionados = [];
        let cursoActual = "5to";
        let estudianteActual = null; // Mantiene al estudiante temporalmente
        
        // Elementos de la interfaz
        const sortearBtn = document.getElementById('sortearBtn');
        const sacarObjetoBtn = document.getElementById('sacarObjetoBtn');
        const resultadoNombreDiv = document.getElementById('resultado-nombre');
        const resultadoObjetoDiv = document.getElementById('resultado-objeto');
        const listaSeleccionados = document.getElementById('listaSeleccionados');
        const gradoDiv = document.getElementById('grado');

        // Funci√≥n para limpiar la pantalla y preparar el siguiente sorteo
        function limpiarTarjetasParaSiguienteTurno() {
            // Limpiar variables de estado para el nuevo turno
            estudianteActual = null;
            
            // Limpiar interfaz
            resultadoNombreDiv.textContent = 'Presiona "Sacar Estudiante"';
            resultadoObjetoDiv.textContent = '...';
            sacarObjetoBtn.disabled = true;

            // Re-habilitar el bot√≥n de sorteo si a√∫n quedan estudiantes y objetos
            if (disponibles.length > 0 && elementosDisponibles.length > 0) {
                sortearBtn.disabled = false;
            } else {
                sortearBtn.disabled = true;
                if (disponibles.length === 0) {
                    resultadoNombreDiv.textContent = `¬°Aventura Completada! Todos han participado.`;
                } else if (elementosDisponibles.length === 0) {
                    resultadoNombreDiv.textContent = `¬°Faltan estudiantes, pero ya no quedan objetos √∫nicos! ü•∫`;
                }
            }
        }

        function inicializarActividad() {
            disponibles = [...estudiantesPorCurso[cursoActual]];
            elementosDisponibles = [...elementosHistoriaBase];
            seleccionados = [];
            
            gradoDiv.textContent = `Curso: ${cursoActual} de Secundaria`;
            actualizarListaSeleccionados();
            limpiarTarjetasParaSiguienteTurno();
        }

        // --- L√≥gica del Sorteo de Estudiante ---
        sortearBtn.addEventListener('click', () => {
            
            // Limpia las tarjetas del turno anterior ANTES de iniciar la animaci√≥n (Punto 2)
            if (estudianteActual === null) {
                resultadoNombreDiv.textContent = 'Sacando el pr√≥ximo Estudiante...';
                resultadoObjetoDiv.textContent = '...';
            }
            
            // Si el sorteo ha finalizado, salir
            if (disponibles.length === 0 || elementosDisponibles.length === 0) {
                limpiarTarjetasParaSiguienteTurno();
                return;
            }

            let intervalId;
            let contador = 0;
            const duracionAnimacion = 2500;
            const tiempoPorIteracion = 60;

            sortearBtn.disabled = true;
            sacarObjetoBtn.disabled = true;

            intervalId = setInterval(() => {
                const indiceAleatorio = Math.floor(Math.random() * disponibles.length);
                resultadoNombreDiv.textContent = `${disponibles[indiceAleatorio]}`;
                contador += tiempoPorIteracion;

                if (contador >= duracionAnimacion) {
                    clearInterval(intervalId);

                    const indiceFinal = Math.floor(Math.random() * disponibles.length);
                    estudianteActual = disponibles[indiceFinal];

                    resultadoNombreDiv.textContent = `${estudianteActual} üéâ`;
                    sacarObjetoBtn.disabled = false;
                }
            }, tiempoPorIteracion);
        });

        // --- L√≥gica del Sorteo de Objeto ---
        sacarObjetoBtn.addEventListener('click', () => {
            if (!estudianteActual) { return; }

            let intervalId;
            let contador = 0;
            const duracionAnimacion = 1800;
            const tiempoPorIteracion = 50;

            sacarObjetoBtn.disabled = true;
            sortearBtn.disabled = true;
            resultadoObjetoDiv.textContent = '¬°GIRANDO!';

            intervalId = setInterval(() => {
                const indiceAleatorio = Math.floor(Math.random() * elementosDisponibles.length);
                resultadoObjetoDiv.textContent = `${elementosDisponibles[indiceAleatorio]}`;
                contador += tiempoPorIteracion;

                if (contador >= duracionAnimacion) {
                    clearInterval(intervalId);

                    // Seleccionar y eliminar el objeto de la lista de disponibles
                    const indiceFinal = Math.floor(Math.random() * elementosDisponibles.length);
                    const objetoSeleccionado = elementosDisponibles.splice(indiceFinal, 1)[0];

                    // 1. Agregar a la lista de seleccionados
                    seleccionados.push({ nombre: estudianteActual, objeto: objetoSeleccionado });

                    // 2. Quitar el estudiante de la lista de disponibles
                    const indexEstudiante = disponibles.indexOf(estudianteActual);
                    if (indexEstudiante > -1) {
                        disponibles.splice(indexEstudiante, 1);
                    }

                    // 3. Mostrar resultado final en las tarjetas (Punto 2: Se mantiene)
                    resultadoObjetoDiv.textContent = `${objetoSeleccionado}`;
                    resultadoNombreDiv.textContent = `${estudianteActual} + ${objetoSeleccionado}`;

                    // 4. Actualizar interfaz
                    actualizarListaSeleccionados();

                    // 5. El bot√≥n de Sortear Estudiante se habilita para iniciar el nuevo turno
                    if (disponibles.length > 0 && elementosDisponibles.length > 0) {
                        sortearBtn.disabled = false;
                    } else {
                        // Fin del sorteo
                        sortearBtn.disabled = true;
                        estudianteActual = null; // Limpiar para que no se pueda usar este resultado
                    }
                }
            }, tiempoPorIteracion);
        });

        // Actualiza la lista visible de seleccionados
        function actualizarListaSeleccionados() {
            listaSeleccionados.innerHTML = '';
            if (seleccionados.length === 0) {
                listaSeleccionados.innerHTML = '<li>¬°Aqu√≠ aparecer√°n los turnos!</li>';
                return;
            }
            seleccionados.forEach((item, index) => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <strong>${index + 1}.</strong>
                    <span class="nombre-historia">${item.nombre}</span>:
                    <span class="objeto-historia">${item.objeto}</span>
                `;
                listaSeleccionados.appendChild(li);
            });
            listaSeleccionados.scrollTop = listaSeleccionados.scrollHeight;
        }

        // Ejecutar al cargar
        document.addEventListener('DOMContentLoaded', () => {
            inicializarActividad();
            // Inicializar animaciones de figuras (si est√°n en el HTML)
            const leftChild = document.getElementById('left-child');
            const rightChild = document.getElementById('right-child');
            if (leftChild && rightChild) {
                leftChild.style.animation = 'pulse 2s infinite';
                rightChild.style.animation = 'pulse 2s infinite';
            }
        });
    </script>
</body>
</html>